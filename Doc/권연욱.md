# React의 class 와  function style coding

참고 강의 : https://www.youtube.com/watch?v=iY_vmP-Q3Ak&list=PLuHgQVnccGMCEfBwnNGsJCQDiqSWI-edj

---

16.8 버전부터 `Hook`을 제공하면서 Function에서도 내부적으로 state 사용이 가능하고, component life cycle에 따라 해야하는 작업을 정의할 수 있다.

react는 function style과 class style을 모두 지원한다.

### props

---

```react
import React from 'react';

// 다른 component를 사용하는 component
function App() {
    return(
        <div className="container">
            <FuncComp initNumber={2}></FuncComp>
        	<classComp initNumber={2}></classComp>
        </div>
    );
}

// function
function FuncComp(props) {
    // react가 호출할 때 첫번째 parameter는 전달된 props 값
    return (
        <div>
        	props : {props.initNumber}
        </div>
    );
}

// class
class ClassComp extends React.Component{
    render() {
        return (
            <div>
            	props : {this.props.initNumber}
            </div>
        );
    }
}
```



### Hook

---

내장된 hook과 사용자 정의 hook이 있다.

내장된 hook은 use로 시작한다.

### 1. useState

class의 state를 function에서 사용

```react
// import React, { useState } from 'react'; 로 import 해야 함

var numberState = useState(props.initNumber);
var number = numberState[0]; // state 값
var setNumber = numberState[1]; // state를 바꿀 수 있는 함수
```

다음과 같이 한 줄로도 작성 가능

```react
var [number, setNumber] = useState(props.initNumber);
```

button onClick의 callback 함수로 setNumber 등록

```react
<input type="button" value="random" onClick={
        function () {
            setNumber(Math.random());
        }
    }></input>
```



동일한 동작을 하는 class style code

```react
state = {
	number = this.props.initNumber;
}

...

<input type="button" value="random" onClick={
    function () {
        this.setState({number: Math.random()})
    }.bind(this)
}></input>
```



### 2. useEffect

여기서 effect는 side effect를 말하는데, 

component의 return을 main effect, 그 외의 것들을 side effect 라고 본다.



### 2-1. componentDidMount

컴포넌트가 생성된 후 할 일을 정의할 때 사용한다.

예를 들어 mount 후 추가적으로 DOM을 처리할 때나 네트워크 위에서 data를 다운받아 처리할 때 사용한다.

```react
// []가 비어있는 경우 최초 한 번만 실행된다.
useEffect(function() {
    document.title = number;
    return function () {
        // component가 소멸될 때 한 번만 실행된다.
    }
}, []);
```
동일한 동작을 하는 class style code

```react
componentDidMount() {
    document.title = number;
}
```

### 2-2. componentDidMount & componentDidUpdate

component는 state에 변동이 있을 때 update된다. (ex) new props, setState(), force Update()

```react
// component가 mount될 때와 update될 때마다 실행된다.
useEffect(function() {
    document.title = number;
});
```

동일한 동작을 하는 class style code

```react
// 두 method에 같은 code를 작성하는 것과 동일한 효과이다.
componentDidMount() {
    document.title = number;
}

componentDidUpdate() {
    document.title = number;
}
```

### 2-3. Effect 생략으로 성능 최적화

해당 callback 함수가 작동하는 경우를 [] 안의 인자값이 변동하는 경우로 한정

```react
// [] 안의 인자값에 변동이 있을 때만 실행
useEffect(function() {
    document.title = number;
}, [number]);
```

[] 안의 인자값을 다르게 하여 useEffect를 여러 개 사용하는 경우 각각 동작함

```react
// number라는 state값에 변동이 있을 때만 실행
useEffect(function() {
    document.title = number;
}, [number]);

// _date라는 state값에 변동이 있을 때만 실행
useEffect(function() {
    document.title = _date;
}, [_date]);
```

### 2-4. componentWillUnmount

component가 사라질 때 필요한 작업을 정의한다. (clean up)

```react
// component가 mount될 때, update될 때마다 실행
useEffect(function() {
   return function(){
       // useEffect가 재실행 되기 전에 실행
   } 
});
```

```react
// component가 mount될 때, number state가 update될 때마다 실행
useEffect(function() {
   return function(){
       // number state가 update될 때 useEffect가 재실행 되기 전 실행
   } 
}, [number]);
```

```react
// component가 mount될 때 최초 한 번 실행
useEffect(function() {
   return function(){
       // component가 소멸될 때 실행
   } 
}, []);
```

동일한 동작을 하는 class style code

```react
componentWillUnmount() {
	return function(){
       // component가 소멸될 때 실행
   }
}
```



# expo로 React Native 시작하기

참고 강의: https://www.youtube.com/playlist?list=PL7jH19IHhOLPEhP6oPSgK6r-neUVVA-pi

---

### expo의 장점

​	native file들을 대신 관리해줌

​	휴대폰에서 테스트 가능 (Xcode, Android Studio 필요 없음)

​	simulation과 React Native 업데이트 처리해줌

​	React Native보다 더 많은 모듈 지원

​	Window에서 iOS App을 빌드할 수 있음

### expo의 단점

​	native file들을 직접 관리할 수 없음



#### 설치해야할 것

- 버전 10 이상의 node

- npm
- expo app (휴대폰에 설치)

```c
npm install -g expo-cli
```

#### 프로젝트 생성

```c
expo init 프로젝트 이름
```

Choose a template에서 blank(첫번째) 선택

```c
cd 프로젝트 이름
yarn start // or npm start
```

웹페이지에 있는 QR 코드를 안드로이드의 경우 expo앱에서, 아이폰의 경우 카메라에서 스캔한다.



#### expo가 제공하는 reloading 기능

​	live reload

​		저장하면 자동으로 프로젝트가 refresh되고 변경사항 확인 가능

​	hot reload

​		수정하거나 새롭게 추가한 코드만 인지해 불러옴

#### 모바일 앱 만드는 방법

##### 	1. Native App

​		Swift 또는 Objective-C로 iOS 앱 만들기 - Xcode

​		Java 또는 Kotlin으로 Android 앱 만들기 - Android Studio

	##### 	2. Hybrid App

​		웹 기반 앱(앱 안에서 작동하는 웹)

​		Cordova 또는 PhonGap 등을 이용해 간단한 앱을 만들고 그 안에 HTML, CSS, JS 넣기

	##### 	3. Web App

#### React Native 작동 방식

​	JavaScript를 이용해 iOS 또는 Android의 native 엔진에게 메세지를 보냄

​	JavaScript를 iOS나 Android가 이해하기 위한 bridge가 항상 필요 - 느린 성능을 유발할 수도 있음

​	컨텐츠만 가져오는 App에 적합 - ex) Instagram, 커뮤니티 앱 등

​	3D 비디오 게임, 3D AR 앱 등의 경우에는 부적합 - 코드 최적화에 오랜 시간이 걸림

#### RN에서 사용하는 태그

​	<View> = <div> 역할

​	<Text> = <span> 역할, text를 담음

#### 종종 발생하는 Error

```c
Error: read ECONNRESET
// connection이 reset된 경우, expo kill하고 restart 하면 해결
```

#### CSS

부모 tag의 style이 자식 tag에 적용되지 않음

##### layout 규칙

```css
flexDirection: column /* default, 세로 */
/* flexDirection: row 로 바꾸면 가로 정렬*/

flex: 1 /* 모든 공간 사용 가능 */
/* 같은 컨테이너 안의 view 두 개에 각각 flex를 1과 2로 주었을 때, 화면에 1/3, 2/3 비율로 나타남  */
```

##### RN에만 있는 속성

```css
paddingHorizontal: 30 /* 양 옆 padding */
paddingVertical: 100 /* 위, 아래 padding */
```

#### Location

device의 위치 정보를 받아올 수 있는 라이브러리

```c
expo install expo-location
```

#### prop-types

컴포넌트의 props에 대해 runtime 환경에서 type 체크를 해주는 라이브러리

```c
yarn add prop-types // npm install prop-types
```

#### @expo/vector-icons

expo package에 내장된 icon 라이브러리

https://icons.expo.fyi/ 에서 icon을 검색, 조회할 수 있음

```react
import { 원하는 icon family } from '@expo/vector-icons';
```

#### LinearGradient

선형 그라데이션 효과를 사용할 수 있는 라이브러리

```c
expo install expo-linear-gradient
```
#### es6 - 두 개 object 함께 쓰는 방식

```react
<View style={{ ...styles.halfContainer, ...styles.textContainer }} />
```

